# SilentAlliance Environment Configuration
# Copy this file to .env and fill in the values

# ===========================================
# Server Configuration
# ===========================================
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
RUST_ENV=development
RUST_LOG=info,silent_alliance=debug
BODY_LIMIT=10485760
REQUEST_TIMEOUT=30

# ===========================================
# Database Configuration (PostgreSQL)
# ===========================================
DATABASE_URL=postgres://silentalliance:password@localhost:5432/silentalliance
DATABASE_MAX_CONNECTIONS=100
DATABASE_MIN_CONNECTIONS=5
DATABASE_CONNECT_TIMEOUT=10
DATABASE_IDLE_TIMEOUT=600
DATABASE_MAX_LIFETIME=1800

# ===========================================
# Redis Configuration
# ===========================================
REDIS_URL=redis://localhost:6379
REDIS_MAX_CONNECTIONS=50
REDIS_CONNECT_TIMEOUT=5
REDIS_KEY_PREFIX=silentalliance:

# ===========================================
# Cryptography Configuration
# ===========================================
# Generate with: openssl rand -base64 32
MASTER_KEY=YOUR_32_BYTE_BASE64_ENCODED_KEY_HERE

# Argon2 parameters (adjust based on your hardware)
ARGON2_MEMORY_COST=65536
ARGON2_TIME_COST=3
ARGON2_PARALLELISM=4

# ===========================================
# JWT Configuration
# ===========================================
# Generate RSA keypair with:
# openssl genrsa -out private.pem 2048
# openssl rsa -in private.pem -pubout -out public.pem

# Paste the contents of private.pem (replace newlines with \n)
JWT_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\n...\n-----END RSA PRIVATE KEY-----"

# Paste the contents of public.pem (replace newlines with \n)
JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----"

JWT_ACCESS_TOKEN_EXPIRY=900
JWT_REFRESH_TOKEN_EXPIRY=604800
JWT_ISSUER=silentalliance
JWT_AUDIENCE=silentalliance-api

# ===========================================
# OAuth Configuration
# ===========================================
# Generate with: openssl rand -base64 32
OAUTH_STATE_SECRET=YOUR_OAUTH_STATE_SECRET_HERE
OAUTH_CODE_EXPIRY=300

# GitHub OAuth (optional)
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_REDIRECT_URI=http://localhost:8080/api/v1/auth/oauth/callback/github

# Discord OAuth (optional)
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=
DISCORD_REDIRECT_URI=http://localhost:8080/api/v1/auth/oauth/callback/discord

# ===========================================
# Storage Configuration
# ===========================================
STORAGE_TYPE=local
STORAGE_LOCAL_PATH=./uploads
STORAGE_MAX_FILE_SIZE=52428800
STORAGE_ALLOWED_MIME_TYPES=image/jpeg,image/png,image/gif,image/webp

# S3-compatible storage (optional)
S3_BUCKET=
S3_REGION=
S3_ENDPOINT=

# ===========================================
# Rate Limiting Configuration
# ===========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_GENERAL_RPS=100
RATE_LIMIT_GENERAL_BURST=200
RATE_LIMIT_AUTH_RPS=10
RATE_LIMIT_AUTH_BURST=20
RATE_LIMIT_EXPENSIVE_RPM=10

# ===========================================
# CORS Configuration
# ===========================================
CORS_ALLOWED_ORIGINS=http://localhost:3000
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Request-Id
CORS_EXPOSED_HEADERS=X-Request-Id,X-RateLimit-Remaining
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=86400
